<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simulateur du jeu d&#39;instructions d&#39;un processeur simple: Référence du fichier debug.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.7.4 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simulateur du jeu d'instructions d'un processeur simple</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li><a href="dirs.html"><span>Répertoires</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Portée&#160;globale</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('debug_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Fonctions</a>  </div>
  <div class="headertitle">
<div class="title">Référence du fichier debug.c</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="exec_8h_source.html">exec.h</a>&quot;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Graphe des dépendances par inclusion de debug.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="debug_8c__incl.png" border="0" usemap="#debug_8c" alt=""/></div>
<map name="debug_8c" id="debug_8c">
<area shape="rect" id="node3" href="debug_8h.html" title="Fonctions de mise au point interactive." alt="" coords="5,80,72,107"/><area shape="rect" id="node15" href="exec_8h.html" title="Exécution d&#39;une instruction." alt="" coords="97,80,159,107"/><area shape="rect" id="node7" href="machine_8h.html" title="Description de la structure du processeur et de sa mémoire." alt="" coords="81,155,163,181"/><area shape="rect" id="node10" href="instruction_8h.html" title="Description du jeu d&#39;instruction." alt="" coords="127,229,220,256"/></map>
</div>
</div>
<p><a href="debug_8c_source.html">Aller au code source de ce fichier.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Fonctions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="debug_8c.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dialogue de mise au point interactive pour l'instruction courante.  <a href="#a2ef30c42cbc289d899a8be5d2d8f77d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="debug_8c.html#a3a88fdc680b7a1ae8c4c7c8ddee730ab">debug_ask</a> (<a class="el" href="structMachine.html">Machine</a> *pmach)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dialogue de mise au point interactive pour l'instruction courante.  <a href="#a3a88fdc680b7a1ae8c4c7c8ddee730ab"></a><br/></td></tr>
</table>
<hr/><h2>Documentation des fonctions</h2>
<a class="anchor" id="a3a88fdc680b7a1ae8c4c7c8ddee730ab"></a><!-- doxytag: member="debug.c::debug_ask" ref="a3a88fdc680b7a1ae8c4c7c8ddee730ab" args="(Machine *pmach)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool debug_ask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMachine.html">Machine</a> *&#160;</td>
          <td class="paramname"><em>pmach</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dialogue de mise au point interactive pour l'instruction courante. </p>
<p>Cette fonction gère le dialogue pour l'option <code>-d</code> (debug). Dans ce mode, elle est invoquée après l'exécution de chaque instruction. Elle affiche le menu de mise au point et on exécute le choix de l'utilisateur. Si cette fonction retourne faux, on abandonne le mode de mise au point interactive pour les instructions suivantes et jusqu'à la fin du programme.</p>
<dl><dt><b>Paramètres:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mach</td><td>la machine/programme en cours de simulation </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Renvoie:</b></dt><dd>vrai si l'on doit continuer en mode debug, faux sinon </dd></dl>

<p>Définition à la ligne <a class="el" href="debug_8c_source.html#l00031">31</a> du fichier <a class="el" href="debug_8c_source.html">debug.c</a>.</p>

<p>Références <a class="el" href="machine_8c_source.html#l00238">print_cpu()</a>, <a class="el" href="machine_8c_source.html#l00220">print_data()</a>, <a class="el" href="machine_8c_source.html#l00207">print_program()</a>, et <a class="el" href="debug_8c_source.html#l00008">usage()</a>.</p>

<p>Référencé par <a class="el" href="machine_8c_source.html#l00257">simul()</a>.</p>
<div class="fragment"><pre class="fragment">                               {
    <span class="keywordtype">int</span> c;

    <span class="keywordflow">while</span>(<span class="keyword">true</span>)
    {
        printf(<span class="stringliteral">&quot;DEBUG? &quot;</span>);
        c = getchar();

        <span class="keywordflow">if</span>(c == <span class="charliteral">&#39;\n&#39;</span>)
            <span class="keywordflow">return</span> <span class="keyword">true</span>;

        <span class="keywordtype">int</span> t;

        <span class="keywordflow">do</span>
        {
            <span class="comment">//vide le buffer d&#39;stdin</span>
            <span class="comment">//fflush(stdin) non portable (ne fonctionne pas avec gcc</span>
            <span class="comment">//par exemple)</span>
            t = getchar();
        } <span class="keywordflow">while</span>(t != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; t != EOF);

        <span class="keywordflow">switch</span>(c)
        {
            <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:
                <a class="code" href="debug_8c.html#a2ef30c42cbc289d899a8be5d2d8f77d0" title="Dialogue de mise au point interactive pour l&#39;instruction courante.">usage</a>();
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:
                <span class="keywordflow">return</span> <span class="keyword">false</span>;

            <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:
                <span class="keywordflow">return</span> <span class="keyword">true</span>;

            <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:
                <a class="code" href="machine_8c.html#a87cfff30238b966cfc3c0c416d7076e9" title="Affichage des registres du CPU.">print_cpu</a>(pmach);
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:
                <a class="code" href="machine_8c.html#a549be6eaf631d871e9357513c748640d" title="Affichage des données du programme.">print_data</a>(pmach);
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:
            <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:
                <a class="code" href="machine_8c.html#aba3ce4987ef379073d9d3f31debf89e7" title="Affichage des instructions du programme.">print_program</a>(pmach);
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:
                <a class="code" href="machine_8c.html#a87cfff30238b966cfc3c0c416d7076e9" title="Affichage des registres du CPU.">print_cpu</a>(pmach);
                <a class="code" href="machine_8c.html#a549be6eaf631d871e9357513c748640d" title="Affichage des données du programme.">print_data</a>(pmach);
                <span class="keywordflow">break</span>;

            <span class="keywordflow">default</span>:
                <span class="keywordflow">break</span>;
        }
    }

    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Voici le graphe d'appel pour cette fonction :</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_cgraph.png" border="0" usemap="#debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_cgraph" alt=""/></div>
<map name="debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_cgraph" id="debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_cgraph">
<area shape="rect" id="node3" href="machine_8c.html#a87cfff30238b966cfc3c0c416d7076e9" title="Affichage des registres du CPU." alt="" coords="152,5,227,32"/><area shape="rect" id="node5" href="machine_8c.html#a549be6eaf631d871e9357513c748640d" title="Affichage des données du programme." alt="" coords="150,56,229,83"/><area shape="rect" id="node7" href="machine_8c.html#aba3ce4987ef379073d9d3f31debf89e7" title="Affichage des instructions du programme." alt="" coords="139,107,240,133"/><area shape="rect" id="node13" href="debug_8c.html#a2ef30c42cbc289d899a8be5d2d8f77d0" title="Dialogue de mise au point interactive pour l&#39;instruction courante." alt="" coords="161,157,218,184"/><area shape="rect" id="node9" href="instruction_8c.html#a437080d5e8c504588a47d0dba468492f" title="Impression d&#39;une instruction sous forme lisible (désassemblage)" alt="" coords="288,107,403,133"/><area shape="rect" id="node11" href="error_8c.html#a531bb138b38aef758b45a442aa53938a" title="Affichage d&#39;une erreur et fin du simulateur." alt="" coords="451,107,499,133"/></map>
</div>
</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Voici le graphe d'appel pour cette fonction :</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_icgraph.png" border="0" usemap="#debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_icgraph" alt=""/></div>
<map name="debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_icgraph" id="debug_8c_a3a88fdc680b7a1ae8c4c7c8ddee730ab_icgraph">
<area shape="rect" id="node3" href="machine_8h.html#ad0bfa0ce7434b963eea888d7b847ac3b" title="Simulation." alt="" coords="139,5,192,32"/><area shape="rect" id="node5" href="test__simul_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Programme de test." alt="" coords="240,5,291,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2ef30c42cbc289d899a8be5d2d8f77d0"></a><!-- doxytag: member="debug.c::usage" ref="a2ef30c42cbc289d899a8be5d2d8f77d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dialogue de mise au point interactive pour l'instruction courante. </p>
<p>Affiche les commandes disponibles dans le debuggueur. </p>

<p>Définition à la ligne <a class="el" href="debug_8c_source.html#l00008">8</a> du fichier <a class="el" href="debug_8c_source.html">debug.c</a>.</p>

<p>Référencé par <a class="el" href="debug_8c_source.html#l00031">debug_ask()</a>, et <a class="el" href="test__simul_8c_source.html#l00058">main()</a>.</p>
<div class="fragment"><pre class="fragment">             {
    printf(<span class="stringliteral">&quot;Available commands:\n&quot;</span>
           <span class="stringliteral">&quot;\th\thelp\n&quot;</span>
           <span class="stringliteral">&quot;\tc\tcontinue (exit interactive debug mode)\n&quot;</span>
           <span class="stringliteral">&quot;\ts\tstep by step (next instruction)\n&quot;</span>
           <span class="stringliteral">&quot;\tRET\tstep by step (next instruction)\n&quot;</span>
           <span class="stringliteral">&quot;\tr\tprint registers\n&quot;</span>
           <span class="stringliteral">&quot;\td\tprint data memory\n&quot;</span>
           <span class="stringliteral">&quot;\tt\tprint text (program) memory\n&quot;</span>
           <span class="stringliteral">&quot;\tp\tprint text (program) memory\n&quot;</span>
           <span class="stringliteral">&quot;\tm\tprint registers and data memory\n&quot;</span>);
}
</pre></div>
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Voici le graphe d'appel pour cette fonction :</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="debug_8c_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph.png" border="0" usemap="#debug_8c_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph" alt=""/></div>
<map name="debug_8c_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph" id="debug_8c_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph">
<area shape="rect" id="node3" href="debug_8h.html#a3a88fdc680b7a1ae8c4c7c8ddee730ab" title="Dialogue de mise au point interactive pour l&#39;instruction courante." alt="" coords="112,5,197,32"/><area shape="rect" id="node7" href="test__simul_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Programme de test." alt="" coords="347,31,397,57"/><area shape="rect" id="node5" href="machine_8h.html#ad0bfa0ce7434b963eea888d7b847ac3b" title="Simulation." alt="" coords="245,5,299,32"/></map>
</div>
</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="debug_8c.html">debug.c</a>      </li>
      <li class="footer">Généré le Wed Jun 8 2011 22:39:01 pour Simulateur du jeu d'instructions d'un processeur simple par&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
